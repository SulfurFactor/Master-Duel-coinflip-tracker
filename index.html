<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coin Toss Tracker</title>
    <link rel="stylesheet" href="styles.css"> <!-- Optional: Link to a CSS file for styling -->
    <script>
        let socket;

        function initWebSocket() {
            socket = new WebSocket('ws://localhost:8080');

            socket.onopen = function() {
                console.log('WebSocket connection established');
            };

            socket.onmessage = function(event) {
                const data = JSON.parse(event.data);
                document.getElementById('win-count').textContent = data.winCount;
                document.getElementById('loss-count').textContent = data.lossCount;
                document.getElementById('highest-losing-streak').textContent = data.highestLosingStreak;
                document.getElementById('win-percentage').textContent = data.winPercentage + '%';
            };

            socket.onclose = function() {
                console.log('WebSocket connection closed');
            };
        }

        function sendResult(action) {
            const message = JSON.stringify({ action });
            socket.send(message);
        }

        function resetCounts() {
            const message = JSON.stringify({ action: 'reset' });
            socket.send(message);
        }

        window.onload = function() {
            initWebSocket();
        };
    </script>
</head>
<body>
    <h1>Coin Toss Tracker</h1>
    <div>
        <h2>Results:</h2>
        <p>Wins: <span id="win-count">0</span></p>
        <p>Losses: <span id="loss-count">0</span></p>
        <p>Highest Losing Streak: <span id="highest-losing-streak">0</span></p>
        <p>Win Percentage: <span id="win-percentage">0%</span></p>
    </div>
    <div>
        <button onclick="sendResult('win')">Win</button>
        <button onclick="sendResult('loss')">Loss</button>
        <button onclick="resetCounts()">Reset</button>
    </div>
</body>
</html>
